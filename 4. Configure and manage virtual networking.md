# Configure and manage virtual networking (20â€“25%)

## Configure virtual networks

- Create and configure virtual networks and subnets
- Create and configure virtual network peering
- Configure private and public IP addresses
- Configure user-defined network routes
- Configure Azure DNS

### Virtual networks

Virtual networks represent your network in the cloud. Working with the VNet service within Azure is similar to working with a traditional network on-prem, but there are some added benefits:
- Availability
- Network isolation
- Scalability

VNets allow us to:
- Link other VNets within either the same or different regions for private communication.
- Allow VMs to connect securely using the internet.
- Create private connections between VMs and other Azure services.
- Extend on-prem architecture to the cloud, providing hybrid solutions.



## Configure secure access to virtual networks

- Create and configure network security groups (NSGs) and application security groups (ASGs)
- Evaluate effective security rules
- Implement Azure Bastion
- Configure service endpoints
- Configure private endpoints

## Configure load balancing

- Configure Azure Application Gateway
- Configure an internal or public load balancer
- Troubleshoot load balancing

### Availability sets

An availability set is a logical grouping of virtual machines hosting your application. These consist of update domains (UDs) and fault domains (FDs). Each VM you create will have a UD and FD that's associated with it. 
- Note: you can have up to 3 FDs and 20 UDs.
  - The default number of UDs is 5. If you create more than 5 VMs, the 6th VM will be placed on the 1st UD, the 7th on the 2nd UD, and so on.

Deploying multiple instances of your app will help you achieve High Availability (HA), which removes the risk of a single point of failure. 

FDs represent a set of VMs that have the same network switch, A/C, and power.
- Note: you can only configure up to 3 FDs, which is the default value when setting up availability sets.

UDs represent a group of VMs and the host, which can be updated & rebooted at the same time. 
- Note: only one UD will be rebooted at a time during scheduled maintenanc, such as patching, firmware updates, etc.
  - While one is being rebooted, 30mins is required before the next scheduled task will begin on another domain. 

Creating availability sets can be done using:
- Azure portal
- Azure PowerShell
- Azure CLI

Information required to create availability sets:
- Subscription
- Resource group
- Name
- Region
- Number of FDs
- Number of UDs
- Disk alignment (use of managed disks)

### Availability zones

Each Azure region has unique physical locations. These locations are called zones and make up one or more datacenters that has its own power, networking, and cooling. Deploying apps to multiple zones can provide protection from datacenter failure as we can create instances in different zones within a region. 
- If a zone suffers an outage, instances will be deployed in different zones to maintain availability.

When creating a VM, you can select which zone to deploy to. 

*Note: Availability zones can help improve SLAs of your applications.*


## Monitor virtual networking

- Monitor on-premises connectivity
- Configure and use Azure Monitor for networks
- Use Azure Network Watcher
- Troubleshoot external networking
- Troubleshoot virtual network connectivity
